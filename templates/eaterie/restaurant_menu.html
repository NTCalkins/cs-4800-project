{% extends "base_template.html" %}
{% load static %}
{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/menu.css' %}">
{% endblock %}
{% block content %}


    <body>
    <div class="center">
        <img src="{{ restaurant.image_file.url }}" height="170" width="100%" alt="">
    </div>
    <ul class="list-group">

        <li class="list-group-item">
            <div class="container">
                <h1>{{ restaurant.restaurant_name }}</h1>
                {% if restaurant.restaurant_address %}
                <p>Address: {{ restaurant.restaurant_address }} </p>
                {% endif %}
                <p>Phone number: {{ restaurant.phone_number }}</p>
            </div>
        </li>
        <li class="list-group-item">
            <div class="container">
                <p>{{ restaurant.description }}</p>
            </div>
        </li>
        <li class="list-group-item">
            <div class="container">
                <p>Restaurant Rating, etc...</p>
            </div>

        </li>

    </ul>

    <div class="container">

        <p></p>

        <div id="accordion" role="tablist">
            {% for menu_category in restaurant.menucategory_set.all %}

                <div class="card-header" role="tab" id="headingOne">
                    <h5 class="mb-0">
                        <a data-toggle="collapse" href="#collapse{{ menu_category.id }}">
                            {{ menu_category.category_name }}
                        </a>
                    </h5>
                </div>
                <div id="collapse{{ menu_category.id }}" class="collapse show" role="tabpanel">
                    <div class="row">
                        {% for menu_item in menu_category.menuitem_set.all %}
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h4>{{ menu_item.item_name }}</h4>
                                        <p>${{ menu_item.price }}</p>
                                        <div class="row" style="max-height: 150px">
                                            <div class="col-md-6">
                                                <p style="font-size:10px">{{ menu_item.description|truncatewords:40 }}</p>
                                            </div>
                                            <div class="menu-image">
                                                <img src="{{ menu_item.image_file.url }}" height="100"
                                                     alt="">
                                            </div>
                                    </div>
                                        <!-- TODO: Restrict to only customer -->
                                        <button type="button" data-toggle="modal" data-target="#modal-item-{{ menu_item.pk }}" >Order Here</button>

                                            <!-- Add to cart modal -->
                                        <div class="modal fade" id="modal-item-{{ menu_item.pk }}" name="{{ menu_item.item_name }}" tabindex="-1" role="dialog">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="add_to_cart_title">Add to Cart</h5>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="container">
                                                            <div class="divL">
                                                                <p> How many {{ menu_item.item_name }}(s) would you like? </p>
                                                            </div>
                                                            <div class="divR">
                                                                <form method="POST">
                                                                    {% csrf_token %}
                                                                    <input hidden type="text" name="mipk" value="{{ menu_item.pk }}" readonly>
                                                                <label for="item_amount"> {{ menu_item.item_name }} quantity:</label><br>
                                                                    <input type="number" default="1" min="1" step="1" name="item_amount"/>
                                                                    <input type="submit" class="btn btn-primary" value="Submit" name="add_to_cart_button"/>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn-closemodal" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>




{% endblock %}